function nonASCIItext(t,e,r,a){if(null!==r){var n=!1,i=10;r=""+r;for(var o=0;o<r.length;o++)r.charCodeAt(o)>128&&(n=!0);if(n===!1)return a&&this.setFontSize(a),void this.text(t,e,r);if(void 0===this.charCtx){var s="#fff",c="#000",h="bold 150px PMingLiU",f="150";this.charCanvas=document.createElement("canvas"),this.charCanvas.width=f,this.charCtx=this.charCanvas.getContext("2d"),this.charCtx.font=h,this.charCtx.clear=function(){this.fillStyle=s,this.fillRect(0,0,f,f),this.fillStyle=c}}for(var d=this.charCtx,u=t,f=this.charCanvas.width,l=(a||i)/450,o=0;o<r.length;o++)d.clear(),d.fillText(r.charAt(o),0,120),this.addImage(this.charCanvas.toDataURL("image/jpeg",1),"JPEG",u,e-f*l*.9,f*l,f*l),u+=d.measureText(r.charAt(o)).width*l*1.1}}!function(t){"use strict";var e="addImage_",r=["jpeg","jpg","png"],a=function(t){var e=this.internal.newObject(),r=this.internal.write,n=this.internal.putStream;if(t.n=e,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+t.w),r("/Height "+t.h),t.cs===this.color_spaces.INDEXED?r("/ColorSpace [/Indexed /DeviceRGB "+(t.pal.length/3-1)+" "+("smask"in t?e+2:e+1)+" 0 R]"):(r("/ColorSpace /"+t.cs),t.cs===this.color_spaces.DEVICE_CMYK&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+t.bpc),"f"in t&&r("/Filter /"+t.f),"dp"in t&&r("/DecodeParms <<"+t.dp+">>"),"trns"in t&&t.trns.constructor==Array){for(var i="",o=0,s=t.trns.length;s>o;o++)i+=t.trns[o]+" "+t.trns[o]+" ";r("/Mask ["+i+"]")}if("smask"in t&&r("/SMask "+(e+1)+" 0 R"),r("/Length "+t.data.length+">>"),n(t.data),r("endobj"),"smask"in t){var c="/Predictor 15 /Colors 1 /BitsPerComponent "+t.bpc+" /Columns "+t.w,h={w:t.w,h:t.h,cs:"DeviceGray",bpc:t.bpc,dp:c,data:t.smask};"f"in t&&(h.f=t.f),a.call(this,h)}t.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r("<< /Length "+t.pal.length+">>"),n(this.arrayBufferToBinaryString(new Uint8Array(t.pal))),r("endobj"))},n=function(){var t=this.internal.collections[e+"images"];for(var r in t)a.call(this,t[r])},i=function(){var t,r=this.internal.collections[e+"images"],a=this.internal.write;for(var n in r)t=r[n],a("/I"+t.i,t.n,"0","R")},o=function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:t.image_compression.NONE},s=function(){var t=this.internal.collections[e+"images"];return t||(this.internal.collections[e+"images"]=t={},this.internal.events.subscribe("putResources",n),this.internal.events.subscribe("putXobjectDict",i)),t},c=function(t){var e=0;return t&&(e=Object.keys?Object.keys(t).length:function(t){var e=0;for(var r in t)t.hasOwnProperty(r)&&e++;return e}(t)),e},h=function(t){return"undefined"==typeof t||null===t},f=function(e){return"string"==typeof e&&t.sHashCode(e)},d=function(t){return-1===r.indexOf(t)},u=function(e){return"function"!=typeof t["process"+e.toUpperCase()]},l=function(t){return"object"==typeof t&&1===t.nodeType},C=function(t,e,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var a=""+t.getAttribute("src");if(!r&&0===a.indexOf("data:image/"))return a;!e&&/\.png(?:[?#].*)?$/i.test(a)&&(e="png")}if("CANVAS"===t.nodeName)var n=t;else{var n=document.createElement("canvas");n.width=t.clientWidth||t.width,n.height=t.clientHeight||t.height;var i=n.getContext("2d");if(!i)throw"addImage requires canvas to be supported by browser.";if(r){var o,s,c,h,f,d,u,l,C=Math.PI/180;"object"==typeof r&&(o=r.x,s=r.y,c=r.bg,r=r.angle),l=r*C,h=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l)),d=n.width,u=n.height,n.width=u*f+d*h,n.height=u*h+d*f,isNaN(o)&&(o=n.width/2),isNaN(s)&&(s=n.height/2),i.clearRect(0,0,n.width,n.height),i.fillStyle=c||"white",i.fillRect(0,0,n.width,n.height),i.save(),i.translate(o,s),i.rotate(l),i.drawImage(t,-(d/2),-(u/2)),i.rotate(-l),i.translate(-o,-s),i.restore()}else i.drawImage(t,0,0,n.width,n.height)}return n.toDataURL("png"==(""+e).toLowerCase()?"image/png":"image/jpeg")},p=function(t,e){var r;if(e)for(var a in e)if(t===e[a].alias){r=e[a];break}return r},g=function(t,e,r){return t||e||(t=-96,e=-96),0>t&&(t=-1*r.w*72/t/this.internal.scaleFactor),0>e&&(e=-1*r.h*72/e/this.internal.scaleFactor),0===t&&(t=e*r.w/r.h),0===e&&(e=t*r.h/r.w),[t,e]},A=function(t,e,r,a,n,i,o){var s=g.call(this,r,a,n),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;r=s[0],a=s[1],o[i]=n,this.internal.write("q",c(r),"0 0",c(a),c(t),h(e+a),"cm /I"+n.i,"Do Q")};t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t.sHashCode=function(t){return Array.prototype.reduce&&t.split("").reduce(function(t,e){return t=(t<<5)-t+e.charCodeAt(0),t&t},0)},t.isString=function(t){return"string"==typeof t},t.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},t.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},t.isArrayBuffer=function(t){return this.supportsArrayBuffer()?t instanceof ArrayBuffer:!1},t.isArrayBufferView=function(t){return this.supportsArrayBuffer()?"undefined"==typeof Uint32Array?!1:t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array:!1},t.binaryStringToUint8Array=function(t){for(var e=t.length,r=new Uint8Array(e),a=0;e>a;a++)r[a]=t.charCodeAt(a);return r},t.arrayBufferToBinaryString=function(t){this.isArrayBuffer(t)&&(t=new Uint8Array(t));for(var e="",r=t.byteLength,a=0;r>a;a++)e+=String.fromCharCode(t[a]);return e},t.arrayBufferToBase64=function(t){for(var e,r,a,n,i,o="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(t),h=c.byteLength,f=h%3,d=h-f,u=0;d>u;u+=3)i=c[u]<<16|c[u+1]<<8|c[u+2],e=(16515072&i)>>18,r=(258048&i)>>12,a=(4032&i)>>6,n=63&i,o+=s[e]+s[r]+s[a]+s[n];return 1==f?(i=c[d],e=(252&i)>>2,r=(3&i)<<4,o+=s[e]+s[r]+"=="):2==f&&(i=c[d]<<8|c[d+1],e=(64512&i)>>10,r=(1008&i)>>4,a=(15&i)<<2,o+=s[e]+s[r]+s[a]+"="),o},t.createImageInfo=function(t,e,r,a,n,i,o,s,c,h,f,d){var u={alias:s,w:e,h:r,cs:a,bpc:n,i:o,data:t};return i&&(u.f=i),c&&(u.dp=c),h&&(u.trns=h),f&&(u.pal=f),d&&(u.smask=d),u},t.addImage=function(t,e,a,n,i,g,y,E,D){if("string"!=typeof e){var m=g;g=i,i=n,n=a,a=e,e=m}if("object"==typeof t&&!l(t)&&"imageData"in t){var w=t;t=w.imageData,e=w.format||e,a=w.x||a||0,n=w.y||n||0,i=w.w||i,g=w.h||g,y=w.alias||y,E=w.compression||E,D=w.rotation||w.angle||D}if(isNaN(a)||isNaN(n))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var I,v=s.call(this);if(!(I=p(t,v))){var b;if(l(t)&&(t=C(t,e,D)),h(y)&&(y=f(t)),!(I=p(y,v))){if(this.isString(t)){var S=this.extractInfoFromBase64DataURI(t);S?(e=S[2],t=atob(S[3])):137===t.charCodeAt(0)&&80===t.charCodeAt(1)&&78===t.charCodeAt(2)&&71===t.charCodeAt(3)&&(e="png")}if(e=(e||"JPEG").toLowerCase(),d(e))throw new Error("addImage currently only supports formats "+r+", not '"+e+"'");if(u(e))throw new Error("please ensure that the plugin for '"+e+"' support is added");if(this.supportsArrayBuffer()&&(b=t,t=this.binaryStringToUint8Array(t)),I=this["process"+e.toUpperCase()](t,c(v),y,o(E),b),!I)throw new Error("An unkwown error occurred whilst processing the image")}}return A.call(this,a,n,i,g,I,I.i,v),this};var y=function(t){var e,r,a;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var n=256*t.charCodeAt(4)+t.charCodeAt(5),i=4,o=t.length;o>i;){if(i+=n,255!==t.charCodeAt(i))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(i+1)||193===t.charCodeAt(i+1)||194===t.charCodeAt(i+1)||195===t.charCodeAt(i+1)||196===t.charCodeAt(i+1)||197===t.charCodeAt(i+1)||198===t.charCodeAt(i+1)||199===t.charCodeAt(i+1))return r=256*t.charCodeAt(i+5)+t.charCodeAt(i+6),e=256*t.charCodeAt(i+7)+t.charCodeAt(i+8),a=t.charCodeAt(i+9),[e,r,a];i+=2,n=256*t.charCodeAt(i)+t.charCodeAt(i+1)}},E=function(t){var e=t[0]<<8|t[1];if(65496!==e)throw new Error("Supplied data is not a JPEG");for(var r,a,n,i,o=t.length,s=(t[4]<<8)+t[5],c=4;o>c;){if(c+=s,r=D(t,c),s=(r[2]<<8)+r[3],(192===r[1]||194===r[1])&&255===r[0]&&s>7)return r=D(t,c+5),a=(r[2]<<8)+r[3],n=(r[0]<<8)+r[1],i=r[4],{width:a,height:n,numcomponents:i};c+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},D=function(t,e){return t.subarray(e,e+5)};t.processJPEG=function(t,e,r,a,n){var i,o=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE,c=8;return this.isString(t)?(i=y(t),this.createImageInfo(t,i[0],i[1],1==i[3]?this.color_spaces.DEVICE_GRAY:o,c,s,e,r)):(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)?(i=E(t),t=n||this.arrayBufferToBinaryString(t),this.createImageInfo(t,i.width,i.height,1==i.numcomponents?this.color_spaces.DEVICE_GRAY:o,c,s,e,r)):null)},t.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API);